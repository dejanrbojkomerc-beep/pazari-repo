
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Pazari poslednja 3 dana</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="refresh" content="300">
    <style>
        :root {
            --border: #ddd;
            --muted: #666;
        }
        body {
            font-family: Arial, sans-serif;
            margin: 12px;
        }
        h2 {
            margin: 16px 0 8px 0;
            font-size: 18px;
        }
        .table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            border: 1px solid var(--border);
            border-radius: 8px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            min-width: 720px;
        }
        th, td {
            border: 1px solid var(--border);
            padding: 8px;
            text-align: right;
            white-space: nowrap;
        }
        th {
            background-color: #f5f5f5;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 1;
        }
        td:first-child, th:first-child {
            text-align: left;
            position: sticky;
            left: 0;
            z-index: 2;
            background: #fff;
        }
        tr:nth-child(even) { background-color: #fafafa; }
        tr:last-child { font-weight: bold; background-color: #e6f7ff; }
        .cards {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-top: 16px;
        }
        .card {
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px;
            background: #fff;
        }
        .card canvas {
            width: 100% !important;
            height: 460px !important;
        }
        .legend-note {
            color: var(--muted);
            font-size: 12px;
            margin-top: 4px;
        }
        @media (min-width: 900px) {
            .cards { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 600px) {
            body { font-size: 14px; }
            th, td { padding: 6px; }
        }
    </style>
</head>
<body>
    <h2>Pazari za poslednja 3 dana</h2>
    <p><strong>Vreme poslednjeg računa:</strong> 08:25</p>
    <div class="table-wrapper">
        <table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="2" halign="left">2026-01-02</th>
      <th colspan="2" halign="left">2025-12-31</th>
      <th colspan="2" halign="left">2025-12-30</th>
    </tr>
    <tr>
      <th></th>
      <th>Pazar</th>
      <th>Broj računa</th>
      <th>Pazar</th>
      <th>Broj računa</th>
      <th>Pazar</th>
      <th>Broj računa</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>TC_Beo</th>
      <td>0.00</td>
      <td>0</td>
      <td>546,300.30</td>
      <td>226</td>
      <td>902,383.70</td>
      <td>301</td>
    </tr>
    <tr>
      <th>Arandjelovac</th>
      <td>0.00</td>
      <td>0</td>
      <td>625,991.18</td>
      <td>200</td>
      <td>615,973.23</td>
      <td>213</td>
    </tr>
    <tr>
      <th>Aviv</th>
      <td>0.00</td>
      <td>0</td>
      <td>357,284.14</td>
      <td>162</td>
      <td>389,020.02</td>
      <td>173</td>
    </tr>
    <tr>
      <th>BW_Galerija</th>
      <td>0.00</td>
      <td>0</td>
      <td>709,006.74</td>
      <td>167</td>
      <td>1,392,087.39</td>
      <td>309</td>
    </tr>
    <tr>
      <th>Banjica</th>
      <td>499.90</td>
      <td>1</td>
      <td>0.00</td>
      <td>0</td>
      <td>0.00</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Borca</th>
      <td>0.00</td>
      <td>0</td>
      <td>1,119,425.29</td>
      <td>366</td>
      <td>1,173,567.99</td>
      <td>388</td>
    </tr>
    <tr>
      <th>Karaburma</th>
      <td>0.00</td>
      <td>0</td>
      <td>478,024.55</td>
      <td>204</td>
      <td>614,664.47</td>
      <td>240</td>
    </tr>
    <tr>
      <th>Knez</th>
      <td>0.00</td>
      <td>0</td>
      <td>377,882.72</td>
      <td>125</td>
      <td>348,477.26</td>
      <td>132</td>
    </tr>
    <tr>
      <th>Leskovac</th>
      <td>0.00</td>
      <td>0</td>
      <td>382,774.56</td>
      <td>149</td>
      <td>610,586.36</td>
      <td>229</td>
    </tr>
    <tr>
      <th>Loznica</th>
      <td>0.00</td>
      <td>0</td>
      <td>572,153.72</td>
      <td>220</td>
      <td>715,112.38</td>
      <td>260</td>
    </tr>
    <tr>
      <th>Mladenovac</th>
      <td>0.00</td>
      <td>0</td>
      <td>444,156.16</td>
      <td>168</td>
      <td>608,895.62</td>
      <td>253</td>
    </tr>
    <tr>
      <th>NS_Sajam</th>
      <td>0.00</td>
      <td>0</td>
      <td>384,470.31</td>
      <td>132</td>
      <td>664,962.93</td>
      <td>204</td>
    </tr>
    <tr>
      <th>Nis</th>
      <td>0.00</td>
      <td>0</td>
      <td>786,596.15</td>
      <td>278</td>
      <td>2,020,092.77</td>
      <td>603</td>
    </tr>
    <tr>
      <th>Pancevo</th>
      <td>0.00</td>
      <td>0</td>
      <td>823,141.93</td>
      <td>306</td>
      <td>1,197,267.03</td>
      <td>450</td>
    </tr>
    <tr>
      <th>Paracin</th>
      <td>0.00</td>
      <td>0</td>
      <td>338,840.69</td>
      <td>102</td>
      <td>428,130.60</td>
      <td>122</td>
    </tr>
    <tr>
      <th>Pozarevac</th>
      <td>0.00</td>
      <td>0</td>
      <td>598,562.14</td>
      <td>199</td>
      <td>773,425.14</td>
      <td>298</td>
    </tr>
    <tr>
      <th>Stadion</th>
      <td>0.00</td>
      <td>0</td>
      <td>703,893.75</td>
      <td>256</td>
      <td>867,383.18</td>
      <td>347</td>
    </tr>
    <tr>
      <th>Subotica</th>
      <td>0.00</td>
      <td>0</td>
      <td>274,383.54</td>
      <td>124</td>
      <td>475,769.82</td>
      <td>173</td>
    </tr>
    <tr>
      <th>Surcin</th>
      <td>0.00</td>
      <td>0</td>
      <td>645,677.04</td>
      <td>234</td>
      <td>833,846.73</td>
      <td>274</td>
    </tr>
    <tr>
      <th>Valjevo</th>
      <td>0.00</td>
      <td>0</td>
      <td>628,538.08</td>
      <td>250</td>
      <td>725,778.92</td>
      <td>279</td>
    </tr>
    <tr>
      <th>Vrbas</th>
      <td>0.00</td>
      <td>0</td>
      <td>318,436.23</td>
      <td>108</td>
      <td>387,637.10</td>
      <td>143</td>
    </tr>
    <tr>
      <th>Vrsac</th>
      <td>0.00</td>
      <td>0</td>
      <td>267,588.58</td>
      <td>121</td>
      <td>385,430.16</td>
      <td>159</td>
    </tr>
    <tr>
      <th>Zajecar</th>
      <td>0.00</td>
      <td>0</td>
      <td>489,368.24</td>
      <td>202</td>
      <td>533,551.43</td>
      <td>248</td>
    </tr>
    <tr>
      <th>Zemun</th>
      <td>0.00</td>
      <td>0</td>
      <td>383,073.94</td>
      <td>129</td>
      <td>533,851.06</td>
      <td>164</td>
    </tr>
    <tr>
      <th>Ukupno</th>
      <td>499.90</td>
      <td>1</td>
      <td>12,255,569.98</td>
      <td>4428</td>
      <td>17,197,895.29</td>
      <td>5962</td>
    </tr>
  </tbody>
</table>
    </div>

    <div class="cards">
        <div class="card">
            <h2>Pazar po satima (poslednja 3 dana)</h2>
            <canvas id="salesByHour"></canvas>
            <div class="legend-note">X: sat (0–23) • Y: pazar (RSD)</div>
        </div>
        <div class="card">
            <h2>Broj računa po satima (poslednja 3 dana)</h2>
            <canvas id="receiptsByHour"></canvas>
            <div class="legend-note">X: sat (0–23) • Y: broj računa</div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
    const mkChart = (canvasId, datasets, yTitle) => {
        const ctx = document.getElementById(canvasId);
        return new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [...Array(24).keys()],
                datasets: datasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    legend: { position: 'bottom' },
                    tooltip: {
                        callbacks: {
                            label: (item) => {
                                const val = item.parsed.y || 0;
                                if (yTitle.includes("RSD")) {
                                    return `${item.dataset.label}: ` + val.toLocaleString('sr-RS');
                                }
                                return `${item.dataset.label}: ` + val;
                            }
                        }
                    }
                },
                scales: {
                    x: { title: { display: true, text: "Sat" } },
                    y: { title: { display: true, text: yTitle } }
                }
            }
        });
    };
    const datasetsPazar = [{"label": "2026-01-02 - Pazar", "data": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 499.9, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], "borderColor": "#4CAF50", "backgroundColor": "#4CAF50", "borderWidth": 2}, {"label": "2025-12-31 - Pazar", "data": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 12159.92, 418993.92, 961313.75, 1458154.31, 1789170.99, 1898697.71, 1908174.9, 1589654.06, 1384695.33, 792800.28, 41754.81, 0.0, 0.0, 0.0, 0.0, 0.0], "borderColor": "#FF5722", "backgroundColor": "#FF5722", "borderWidth": 2}, {"label": "2025-12-30 - Pazar", "data": [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 864.99, 272401.36, 848174.16, 1172830.55, 1208047.3499999999, 1136218.85, 1437443.23, 1825652.41, 1523221.18, 1805359.77, 2037298.44, 1924691.95, 1508108.88, 486167.26, 11414.91, 0.0], "borderColor": "#2196F3", "backgroundColor": "#2196F3", "borderWidth": 2}];
    const datasetsRacuni = [{"label": "2026-01-02 - Broj ra\u010duna", "data": [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], "borderColor": "#4CAF50", "backgroundColor": "#4CAF50", "borderWidth": 2}, {"label": "2025-12-31 - Broj ra\u010duna", "data": [0, 0, 0, 0, 0, 0, 0, 0, 2, 170, 377, 527, 656, 697, 642, 559, 500, 284, 14, 0, 0, 0, 0, 0], "borderColor": "#FF5722", "backgroundColor": "#FF5722", "borderWidth": 2}, {"label": "2025-12-30 - Broj ra\u010duna", "data": [0, 0, 0, 0, 0, 0, 0, 0, 3, 118, 286, 409, 465, 436, 512, 567, 580, 593, 684, 644, 505, 158, 2, 0], "borderColor": "#2196F3", "backgroundColor": "#2196F3", "borderWidth": 2}];
    mkChart('salesByHour', datasetsPazar, 'Iznos (RSD)');
    mkChart('receiptsByHour', datasetsRacuni, 'Broj računa');
    </script>
</body>
</html>
